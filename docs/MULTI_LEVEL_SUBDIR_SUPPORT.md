# å¤šçº§å­ç›®å½•æ”¯æŒè¯´æ˜

## æ¦‚è¿°

GitHub mod æ·»åŠ åŠŸèƒ½**å·²å®Œæ•´æ”¯æŒå¤šçº§å­ç›®å½•é€‰æ‹©**ï¼Œæ— éœ€ä»»ä½•é¢å¤–é…ç½®ã€‚

## æ”¯æŒæƒ…å†µ

âœ… **å®Œå…¨æ”¯æŒ** - å¯ä»¥é€‰æ‹©ä»»æ„æ·±åº¦çš„å­ç›®å½•

### æŠ€æœ¯å®ç°

#### 1. GitHub API é€’å½’è·å–
```rust
let url = format!("https://api.github.com/repos/{}/git/trees/{}?recursive=1", repo, branch);
```

ä½¿ç”¨ `recursive=1` å‚æ•°æ—¶ï¼ŒGitHub API ä¼šè¿”å›**å®Œæ•´çš„ç›®å½•æ ‘**ï¼ŒåŒ…æ‹¬æ‰€æœ‰å±‚çº§çš„ç›®å½•ã€‚

#### 2. è·¯å¾„æå–
```rust
let mut dirs: Vec<String> = tree_array
    .iter()
    .filter_map(|item| {
        if item.get("type")?.as_str()? == "tree" {
            Some(item.get("path")?.as_str()?.to_string())  // å®Œæ•´è·¯å¾„
        } else {
            None
        }
    })
    .collect();
```

GitHub API è¿”å›çš„è·¯å¾„å·²ç»æ˜¯å®Œæ•´çš„ç›¸å¯¹è·¯å¾„ï¼Œä¾‹å¦‚ï¼š
- `mods/mod1/config` (ä¸‰çº§ç›®å½•)
- `tools/scripts/converter` (ä¸‰çº§ç›®å½•)
- `data/assets/images` (ä¸‰çº§ç›®å½•)

## å®é™…ç¤ºä¾‹

### ä»“åº“ç»“æ„ç¤ºä¾‹ 1
```
D2RMM-Community-Mods/
â”œâ”€â”€ mods/
â”‚   â”œâ”€â”€ StackSizeChanger/
â”‚   â”‚   â”œâ”€â”€ mod.json
â”‚   â”‚   â””â”€â”€ mod.js
â”‚   â”œâ”€â”€ RunewordMod/
â”‚   â”‚   â”œâ”€â”€ mod.json
â”‚   â”‚   â””â”€â”€ scripts/
â”‚   â”‚       â”œâ”€â”€ main.lua
â”‚   â”‚       â””â”€â”€ config/
â”‚   â”‚           â””â”€â”€ settings.json
â”‚   â””â”€â”€ LootFilter/
â”‚       â””â”€â”€ mod.json
â””â”€â”€ tools/
```

**ä¸‹æ‹‰èœå•æ˜¾ç¤ºï¼š**
```
(æ ¹ç›®å½•)
mods
mods/LootFilter
mods/RunewordMod
mods/RunewordMod/scripts
mods/RunewordMod/scripts/config
mods/StackSizeChanger
tools
```

### ä»“åº“ç»“æ„ç¤ºä¾‹ 2ï¼šæ·±å±‚åµŒå¥—
```
mod-collection/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ gameplay/
â”‚   â”‚   â”œâ”€â”€ balance/
â”‚   â”‚   â”‚   â”œâ”€â”€ items/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ mod.json
â”‚   â”‚   â”‚   â””â”€â”€ skills/
â”‚   â”‚   â””â”€â”€ difficulty/
â”‚   â””â”€â”€ visual/
â”‚       â””â”€â”€ ui/
â”‚           â””â”€â”€ fonts/
â””â”€â”€ docs/
```

**ä¸‹æ‹‰èœå•æ˜¾ç¤ºï¼š**
```
(æ ¹ç›®å½•)
docs
src
src/gameplay
src/gameplay/balance
src/gameplay/balance/items
src/gameplay/balance/skills
src/gameplay/difficulty
src/visual
src/visual/ui
src/visual/ui/fonts
```

## ä½¿ç”¨æ–¹æ³•

### æ ‡å‡†æµç¨‹
1. åœ¨ GitHub å¯¹è¯æ¡†è¾“å…¥ä»“åº“ URL
2. ç‚¹å‡»"è·å–åˆ†æ”¯ä¿¡æ¯"
3. é€‰æ‹©ç›®æ ‡åˆ†æ”¯
4. **ç³»ç»Ÿè‡ªåŠ¨è·å–æ‰€æœ‰å±‚çº§çš„ç›®å½•**
5. ä»ä¸‹æ‹‰èœå•é€‰æ‹©ä»»æ„å±‚çº§çš„ç›®å½•
6. ç‚¹å‡»"æ·»åŠ "

### é€‰æ‹©æ·±å±‚ç›®å½•
ä¾‹å¦‚è¦æ·»åŠ  `mods/RunewordMod/scripts/config` ç›®å½•ï¼š
1. åœ¨å­ç›®å½•ä¸‹æ‹‰èœå•ä¸­æ‰¾åˆ°å¹¶é€‰æ‹© `mods/RunewordMod/scripts/config`
2. ç‚¹å‡»"æ·»åŠ "
3. ç”Ÿæˆçš„è·¯å¾„ï¼š`github:user/repo:mods/RunewordMod/scripts/config@branch`

## ç”Ÿæˆè·¯å¾„æ ¼å¼

### æ ¼å¼è¯´æ˜
```
github:{owner}/{repo}:{subdir}@{branch}
```

### å¤šçº§ç›®å½•ç¤ºä¾‹

| é€‰æ‹©çš„å­ç›®å½• | ç”Ÿæˆçš„å®Œæ•´è·¯å¾„ |
|------------|---------------|
| `(æ ¹ç›®å½•)` | `github:user/repo@main` |
| `mods` | `github:user/repo:mods@main` |
| `mods/mod1` | `github:user/repo:mods/mod1@main` |
| `mods/mod1/config` | `github:user/repo:mods/mod1/config@main` |
| `data/assets/textures` | `github:user/repo:data/assets/textures@main` |

### è·¯å¾„åˆ†éš”ç¬¦
- Windows å’Œ Unix ç³»ç»Ÿé€šç”¨ï¼šä½¿ç”¨ `/` åˆ†éš”ç¬¦
- GitHub API è¿”å›çš„è·¯å¾„ç»Ÿä¸€ä½¿ç”¨ `/`
- mod ç®¡ç†å™¨ä¼šæ­£ç¡®å¤„ç†è·¯å¾„

## é™åˆ¶å’Œæ³¨æ„äº‹é¡¹

### ç›®å½•æ·±åº¦
- âœ… **æ— æ·±åº¦é™åˆ¶**ï¼šæ”¯æŒä»»æ„æ·±åº¦çš„ç›®å½•ç»“æ„
- âœ… GitHub API çš„ `recursive=1` å‚æ•°ä¼šè·å–æ‰€æœ‰å±‚çº§

### æ€§èƒ½è€ƒè™‘
- å¯¹äº**éå¸¸å¤§**çš„ä»“åº“ï¼ˆæ•°åƒä¸ªç›®å½•ï¼‰ï¼ŒåŠ è½½å¯èƒ½éœ€è¦å‡ ç§’é’Ÿ
- GitHub API æœ‰å“åº”å¤§å°é™åˆ¶ï¼ˆé€šå¸¸è¶³å¤Ÿå¤§ï¼Œä¸ä¼šæ˜¯é—®é¢˜ï¼‰
- å»ºè®®ä»“åº“ç›®å½•æ•°é‡æ§åˆ¶åœ¨åˆç†èŒƒå›´å†…ï¼ˆ< 500 ä¸ªï¼‰

### æ˜¾ç¤ºæ’åº
ç›®å½•æŒ‰**å­—æ¯é¡ºåº**æ’åºï¼Œè¿™æ„å‘³ç€ï¼š
```
mods
mods/a-mod
mods/b-mod
mods/b-mod/config
```

å¦‚æœéœ€è¦æŒ‰å±‚çº§åˆ†ç»„æ˜¾ç¤ºï¼Œè¿™æ˜¯æœªæ¥çš„å¢å¼ºæ–¹å‘ã€‚

## å¸¸è§ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1ï¼šMonorepo é£æ ¼çš„ mod ä»“åº“
```
mod-pack/
â”œâ”€â”€ mods/
â”‚   â”œâ”€â”€ balance/
â”‚   â”œâ”€â”€ loot/
â”‚   â””â”€â”€ visual/
```
**é€‰æ‹©**: `mods/balance` æˆ– `mods/loot` ç­‰

### åœºæ™¯ 2ï¼šå¤æ‚é¡¹ç›®ç»“æ„
```
d2r-enhancement/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ features/
â”‚       â””â”€â”€ stacking/
â””â”€â”€ build/
    â””â”€â”€ output/
```
**é€‰æ‹©**: `src/features/stacking` - ç²¾ç¡®å®šä½ mod ä½ç½®

### åœºæ™¯ 3ï¼šåµŒå¥—é…ç½®
```
my-mod/
â””â”€â”€ mod/
    â””â”€â”€ config/
        â””â”€â”€ localized/
            â””â”€â”€ zh-CN/
```
**é€‰æ‹©**: `mod/config/localized/zh-CN` - é€‰æ‹©æœ¬åœ°åŒ–ç‰ˆæœ¬

## æµ‹è¯•éªŒè¯

### æµ‹è¯•æ­¥éª¤
1. å¯åŠ¨ GUIï¼š`.\target\release\infinite-gui.exe`
2. ç‚¹å‡»"æ·»åŠ  GitHub Mod"
3. è¾“å…¥ä¸€ä¸ªæœ‰å¤šçº§ç›®å½•çš„ä»“åº“ï¼ˆå¦‚ `olegbl/d2rmm-mods`ï¼‰
4. è·å–åˆ†æ”¯ä¿¡æ¯å¹¶é€‰æ‹©åˆ†æ”¯
5. æŸ¥çœ‹å­ç›®å½•ä¸‹æ‹‰èœå•

### é¢„æœŸç»“æœ
- âœ… ä¸‹æ‹‰èœå•æ˜¾ç¤ºæ‰€æœ‰å±‚çº§çš„ç›®å½•
- âœ… ç›®å½•è·¯å¾„å®Œæ•´ï¼ˆå¦‚ `mods/StackSizeChanger`ï¼‰
- âœ… å¯ä»¥é€‰æ‹©ä»»æ„å±‚çº§çš„ç›®å½•
- âœ… é€‰æ‹©åè·¯å¾„æ­£ç¡®ç”Ÿæˆ

### çœŸå®ä»“åº“æµ‹è¯•
å¯ä»¥ä½¿ç”¨è¿™äº›å…¬å¼€ä»“åº“è¿›è¡Œæµ‹è¯•ï¼š
- `olegbl/d2rmm` - æœ‰ `mods/` å­ç›®å½•
- `Diablo-II-Resurrected/Infinite` - æœ‰å¤šä¸ªç¤ºä¾‹ç›®å½•
- ä»»ä½•æ ‡å‡†çš„ D2RMM mod ä»“åº“

## æŠ€æœ¯ç»†èŠ‚

### GitHub API å“åº”æ ¼å¼
```json
{
  "tree": [
    {
      "path": "mods",
      "type": "tree",
      "sha": "..."
    },
    {
      "path": "mods/mod1",
      "type": "tree",
      "sha": "..."
    },
    {
      "path": "mods/mod1/config",
      "type": "tree",
      "sha": "..."
    },
    {
      "path": "mods/mod1/config/settings.json",
      "type": "blob",
      "sha": "..."
    }
  ]
}
```

ä»£ç åªæå– `"type": "tree"` çš„æ¡ç›®ï¼Œè‡ªåŠ¨å¿½ç•¥æ–‡ä»¶ï¼ˆ`"type": "blob"`ï¼‰ã€‚

### è·¯å¾„å¤„ç†
- **ä¸éœ€è¦é¢å¤–å¤„ç†**ï¼šGitHub API è¿”å›çš„è·¯å¾„å·²ç»æ˜¯æ­£ç¡®æ ¼å¼
- **è‡ªåŠ¨æ’åº**ï¼š`dirs.sort()` æŒ‰å­—æ¯é¡ºåºæ’åº
- **ä¿æŒåŸæ ·**ï¼šä¸ä¿®æ”¹è·¯å¾„åˆ†éš”ç¬¦æˆ–ç»“æ„

## å¸¸è§é—®é¢˜

### Q: å¯ä»¥é€‰æ‹©å¤šæ·±çš„ç›®å½•ï¼Ÿ
A: **æ— é™åˆ¶**ï¼Œåªè¦ GitHub API èƒ½è¿”å›ï¼Œå°±å¯ä»¥é€‰æ‹©ã€‚

### Q: è·¯å¾„ä¸­çš„ `/` ä¼šæœ‰é—®é¢˜å—ï¼Ÿ
A: ä¸ä¼šï¼ŒGitHub å’Œ mod ç®¡ç†å™¨éƒ½æ­£ç¡®å¤„ç† `/` åˆ†éš”ç¬¦ã€‚

### Q: ç©ºç›®å½•ä¼šæ˜¾ç¤ºå—ï¼Ÿ
A: ä¼šï¼Œåªè¦ç›®å½•å­˜åœ¨äº Git ä»“åº“ä¸­ï¼ˆå³ä½¿ä¸ºç©ºï¼‰ã€‚

### Q: å¦‚æœç›®å½•å¾ˆå¤šï¼Œæ€ä¹ˆå¿«é€Ÿæ‰¾åˆ°ï¼Ÿ
A: å½“å‰ç‰ˆæœ¬æŒ‰å­—æ¯æ’åºã€‚æœªæ¥å¯ä»¥è€ƒè™‘æ·»åŠ æœç´¢/è¿‡æ»¤åŠŸèƒ½ã€‚

### Q: èƒ½å¦æ˜¾ç¤ºç›®å½•çš„å±‚çº§ç»“æ„ï¼ˆç¼©è¿›ï¼‰ï¼Ÿ
A: å½“å‰ç‰ˆæœ¬æ˜¯å¹³é¢åˆ—è¡¨ã€‚æœªæ¥å¯ä»¥è€ƒè™‘æ ‘çŠ¶æ˜¾ç¤ºæˆ–åˆ†ç»„ã€‚

## æ€»ç»“

âœ… **å¤šçº§å­ç›®å½•å·²å®Œå…¨æ”¯æŒ**
- æ— éœ€ä»»ä½•ä¿®æ”¹æˆ–é…ç½®
- å¼€ç®±å³ç”¨
- æ”¯æŒä»»æ„æ·±åº¦çš„ç›®å½•ç»“æ„
- è·¯å¾„æ ¼å¼æ ‡å‡†åŒ–

ğŸ¯ **ç°æœ‰å®ç°å®Œå…¨æ»¡è¶³å¤šçº§å­ç›®å½•éœ€æ±‚**
- GitHub API çš„ `recursive=1` å‚æ•°ç¡®ä¿è·å–æ‰€æœ‰å±‚çº§
- ä»£ç æ­£ç¡®æå–å’Œæ˜¾ç¤ºå®Œæ•´è·¯å¾„
- ç”¨æˆ·å¯ä»¥è‡ªç”±é€‰æ‹©ä»»æ„æ·±åº¦çš„ç›®å½•

ğŸ“ **æ¨èæœ€ä½³å®è·µ**
- ä¸º mod åˆ›å»ºæ¸…æ™°çš„ç›®å½•ç»“æ„
- ä½¿ç”¨æœ‰æ„ä¹‰çš„è·¯å¾„åç§°
- ä¿æŒç›®å½•æ·±åº¦åˆç†ï¼ˆ2-4 å±‚ï¼‰
- åœ¨ README ä¸­è¯´æ˜æ¨èçš„ç›®å½•é€‰æ‹©

ğŸ’¡ **æœªæ¥å¢å¼ºæ–¹å‘**
- æ ‘çŠ¶æ˜¾ç¤ºï¼ˆå¸¦ç¼©è¿›ï¼‰
- æœç´¢/è¿‡æ»¤åŠŸèƒ½
- æ˜¾ç¤ºæ¯ä¸ªç›®å½•çš„æ–‡ä»¶æ•°é‡
- æ™ºèƒ½æ¨èï¼ˆæ£€æµ‹ mod.json ä½ç½®ï¼‰
