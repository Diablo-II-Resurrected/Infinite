# Infinite GUI

简单易用的图形界面mod管理器，用于《暗黑破坏神II：重制版》。

## 功能特性

### ✨ 主要功能

1. **游戏路径选择** - 浏览并选择D2R游戏安装目录
2. **Mod列表管理**
   - 打开现有的mod列表文件（.txt）
   - 保存mod列表供以后使用
   - 添加单个mod文件夹
3. **Mod控制**
   - 启用/禁用特定mod（复选框）
   - 调整mod加载顺序（上移/下移）
   - 删除不需要的mod
4. **一键生成** - 将所有启用的mod合并并生成到游戏目录

### 📍 输出路径

Mod自动生成到固定路径：
```
<游戏路径>/Mods/Infinite/Infinite.mpq/data/
```

例如：
```
F:/Games/Diablo II Resurrected/Mods/Infinite/Infinite.mpq/data/
```

## 构建和运行

### 构建GUI应用

```bash
# 开发构建
cargo build --bin infinite-gui

# 发布构建（优化）
cargo build --release --bin infinite-gui
```

### 运行GUI

```bash
# 开发模式
cargo run --bin infinite-gui

# 运行已构建的可执行文件
./target/release/infinite-gui.exe  # Windows
./target/release/infinite-gui      # Linux/Mac
```

## 使用说明

### 1. 选择游戏路径

点击 **📁 选择游戏目录** 按钮，浏览到D2R游戏安装目录。

例如：
- Windows: `C:\Program Files (x86)\Diablo II Resurrected`
- 或: `F:\Games\Diablo II Resurrected`

### 2. 添加Mods

有两种方式添加mod：

#### 方式A：打开已有的Mod列表
1. 点击 **📂 打开Mod列表**
2. 选择一个`.txt`文件，每行一个mod路径
3. 示例格式：
```
F:/Projects/d2rmm/d2rmm-cli/test_mods/mod_a
F:/Projects/d2rmm/d2rmm-cli/test_mods/mod_b
C:/MyMods/awesome_mod
```

#### 方式B：逐个添加Mod文件夹
1. 点击 **➕ 添加Mod文件夹**
2. 浏览并选择mod目录
3. 重复以添加更多mod

### 3. 管理Mod列表

- **启用/禁用**：勾选/取消勾选复选框
- **调整顺序**：使用 ⬆ 和 ⬇ 按钮
- **删除**：点击 🗑 按钮
- **查看路径**：鼠标悬停在mod上查看完整路径

### 4. 生成Mods

1. 确保至少启用了一个mod
2. 点击 **🚀 生成Mods** 按钮
3. 等待处理完成
4. 检查状态栏显示的结果

### 5. 保存配置

点击 **💾 保存Mod列表** 将当前的mod配置保存到文件，方便下次使用。

## 界面预览

```
┌────────────────────────────────────────────────────────────────┐
│ Infinite - Diablo II: Resurrected Mod Manager                 │
├────────────────────────────────────────────────────────────────┤
│                                                                │
│ 游戏路径: [📁 选择游戏目录]  F:/Games/Diablo II Resurrected   │
│                                                                │
├────────────────────────────────────────────────────────────────┤
│                                                                │
│ Mod 列表    [📂 打开Mod列表] [💾 保存Mod列表] [➕ 添加Mod文件夹] │
│                                                                │
│ ┌────────────────────────────────────────────────────────────┐ │
│ │ ☑ Mod A                      [⬆] [⬇] [🗑]  C:/mods/mod_a  │ │
│ │ ☑ Mod B                      [⬆] [⬇] [🗑]  C:/mods/mod_b  │ │
│ │ ☐ Test Mod                   [⬆] [⬇] [🗑]  C:/mods/test   │ │
│ └────────────────────────────────────────────────────────────┘ │
│                                                                │
├────────────────────────────────────────────────────────────────┤
│                                                                │
│ [   🚀 生成Mods   ]   输出路径: .../Mods/Infinite/...         │
│                                                                │
├────────────────────────────────────────────────────────────────┤
│ 状态: ✅ 成功生成到: F:/Games/.../Mods/Infinite/...            │
└────────────────────────────────────────────────────────────────┘
```

## 技术细节

### 依赖

- **egui/eframe** - 跨平台GUI框架
- **rfd** - 原生文件对话框
- 其他依赖与CLI版本相同

### 工作原理

GUI应用会：
1. 收集用户选择的游戏路径和mod列表
2. 创建临时mod列表文件
3. 调用`infinite` CLI工具进行实际的mod处理
4. 自动设置输出路径为固定位置
5. 显示处理结果和状态

### 与CLI版本的关系

GUI本质上是CLI的友好前端，所有核心mod处理逻辑都使用相同的底层引擎。

## 故障排查

### 问题：点击"生成Mods"没有反应
- 确保已选择游戏路径
- 确保至少启用了一个mod
- 检查状态栏的错误信息

### 问题：无法找到游戏目录
- 确保选择的是包含`D2R.exe`的主目录
- 不是`Data`或`Mods`子目录

### 问题：Mod没有在游戏中生效
- 确认输出路径正确
- 检查游戏设置中是否启用了mods
- 确保D2R版本与mods兼容

## 快捷键

目前GUI不支持键盘快捷键，所有操作通过鼠标完成。

## 未来改进

可能的功能增强：
- [ ] 拖放mod文件夹
- [ ] mod预览和详细信息
- [ ] 实时进度条
- [ ] mod冲突检测
- [ ] 自动备份
- [ ] 主题切换（亮色/暗色）
- [ ] 多语言支持

## 许可证

与主项目相同的MIT许可证。
