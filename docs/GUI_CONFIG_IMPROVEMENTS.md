# GUI é…ç½®é¢æ¿æ”¹è¿›

## æ›´æ–°æ—¥æœŸ
2025å¹´10æœˆ15æ—¥

## æ”¹è¿›å†…å®¹

### 1. æ™ºèƒ½éšè—é…ç½®æŒ‰é’®

**é—®é¢˜:** æ‰€æœ‰ Mod éƒ½æ˜¾ç¤ºé…ç½®æŒ‰é’® âš™,å³ä½¿æ²¡æœ‰é…ç½®é€‰é¡¹

**è§£å†³æ–¹æ¡ˆ:** 
- æ£€æŸ¥ Mod æ˜¯å¦æœ‰é…ç½®é€‰é¡¹
- åªåœ¨æœ‰é…ç½®é€‰é¡¹æ—¶æ˜¾ç¤º âš™ æŒ‰é’®å’Œå¯é€‰ä¸­çš„åç§°
- æ— é…ç½®é€‰é¡¹çš„ Mod ä½¿ç”¨æ™®é€šæ ‡ç­¾æ˜¾ç¤ºåç§°

**å®ç°ä»£ç :**
```rust
// æ£€æŸ¥æ˜¯å¦æœ‰é…ç½®é€‰é¡¹
let has_config = mod_entry.load_config()
    .map(|cfg| !cfg.config.is_empty())
    .unwrap_or(false);

// Modåç§° - å¦‚æœæœ‰é…ç½®,ç‚¹å‡»å¯é€‰ä¸­/å–æ¶ˆé€‰ä¸­
if has_config {
    let name_response = ui.selectable_label(is_selected, &mod_entry.name);
    if name_response.clicked() {
        self.selected_mod_index = if is_selected {
            None
        } else {
            Some(index)
        };
    }
} else {
    ui.label(&mod_entry.name);
}

// é…ç½®æŒ‰é’® - åªåœ¨æœ‰é…ç½®é€‰é¡¹æ—¶æ˜¾ç¤º
if has_config {
    if ui.button("âš™").clicked() {
        self.selected_mod_index = if is_selected {
            None
        } else {
            Some(index)
        };
    }
}
```

**æ•ˆæœ:**
- âœ… æœ‰é…ç½®çš„ Mod: æ˜¾ç¤º âš™ æŒ‰é’®,åç§°å¯ç‚¹å‡»é€‰ä¸­
- âœ… æ— é…ç½®çš„ Mod: ä¸æ˜¾ç¤º âš™ æŒ‰é’®,åç§°ä¸ºæ™®é€šæ–‡æœ¬
- âœ… UI æ›´ç®€æ´,é¿å…æ··æ·†

### 2. é…ç½®é¢æ¿å…¨å®½æ˜¾ç¤º

**é—®é¢˜:** é…ç½®é¢æ¿å®½åº¦å—é™,ä¸èƒ½å……åˆ†åˆ©ç”¨çª—å£ç©ºé—´

**è§£å†³æ–¹æ¡ˆ:**
- ä½¿ç”¨ `ui.available_width()` è·å–å¯ç”¨å®½åº¦
- ä½¿ç”¨ `ui.allocate_ui_with_layout()` å¼ºåˆ¶é¢æ¿ä½¿ç”¨å…¨å®½
- è®¾ç½®å†…éƒ¨ UI å®½åº¦åŒ¹é…å¯ç”¨å®½åº¦

**å®ç°ä»£ç :**
```rust
// ä½¿ç”¨ available_width ä½¿é…ç½®é¢æ¿ä¸çª—å£åŒå®½
ui.allocate_ui_with_layout(
    egui::vec2(ui.available_width(), 0.0),
    egui::Layout::top_down(egui::Align::Min),
    |ui| {
        ui.group(|ui| {
            // ç¡®ä¿å†…éƒ¨ä¹Ÿä½¿ç”¨å…¨å®½
            ui.set_width(ui.available_width());
            
            ui.heading(format!("âš™ {} - é…ç½®", mod_name));
            // ... é…ç½®é€‰é¡¹ ...
        });
    },
);
```

**æ•ˆæœ:**
- âœ… é…ç½®é¢æ¿å®½åº¦ = çª—å£å®½åº¦
- âœ… æ›´å¥½çš„è§†è§‰æ•ˆæœ
- âœ… æ›´å¤šç©ºé—´æ˜¾ç¤ºé…ç½®é¡¹

## ä½¿ç”¨ä½“éªŒ

### åœºæ™¯ 1: æœ‰é…ç½®é€‰é¡¹çš„ Mod

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â˜‘ [Show Item Level]    â¬† â¬‡ âš™ ğŸ—‘  path/to/mod   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
- ç‚¹å‡»åç§°æˆ– âš™ æŒ‰é’® â†’ æ‰“å¼€é…ç½®é¢æ¿
- é…ç½®é¢æ¿å æ»¡çª—å£å®½åº¦

### åœºæ™¯ 2: æ— é…ç½®é€‰é¡¹çš„ Mod

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â˜‘ Simple Mod           â¬† â¬‡ ğŸ—‘     path/to/mod   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
- æ²¡æœ‰ âš™ æŒ‰é’®
- åç§°ä¸å¯ç‚¹å‡»é€‰ä¸­
- UI æ›´ç®€æ´

## æŠ€æœ¯ç»†èŠ‚

### é…ç½®æ£€æµ‹é€»è¾‘

```rust
let has_config = mod_entry.load_config()
    .map(|cfg| !cfg.config.is_empty())
    .unwrap_or(false);
```

1. è°ƒç”¨ `load_config()` å°è¯•è¯»å– mod.json
2. å¦‚æœæˆåŠŸ,æ£€æŸ¥ `config` æ•°ç»„æ˜¯å¦ä¸ºç©º
3. å¦‚æœå¤±è´¥æˆ–ä¸ºç©º,è¿”å› `false`

### å…¨å®½å¸ƒå±€

```rust
ui.allocate_ui_with_layout(
    egui::vec2(ui.available_width(), 0.0),  // å®½åº¦ = å¯ç”¨å®½åº¦, é«˜åº¦ = è‡ªåŠ¨
    egui::Layout::top_down(egui::Align::Min),  // ä»ä¸Šåˆ°ä¸‹,å·¦å¯¹é½
    |ui| {
        ui.group(|ui| {
            ui.set_width(ui.available_width());  // å¼ºåˆ¶å†…éƒ¨ä¹Ÿå…¨å®½
            // ...
        });
    },
);
```

## æµ‹è¯•æ¸…å•

- [x] æ·»åŠ æœ‰é…ç½®çš„ Mod (ShowItemLevel)
  - [x] æ˜¾ç¤º âš™ æŒ‰é’®
  - [x] ç‚¹å‡»åç§°æ˜¾ç¤ºé…ç½®é¢æ¿
  - [x] é…ç½®é¢æ¿å…¨å®½æ˜¾ç¤º
  
- [x] æ·»åŠ æ— é…ç½®çš„ Mod
  - [x] ä¸æ˜¾ç¤º âš™ æŒ‰é’®
  - [x] åç§°ä¸å¯é€‰ä¸­
  - [x] ç‚¹å‡»åç§°æ— ååº”

- [x] çª—å£è°ƒæ•´å¤§å°
  - [x] é…ç½®é¢æ¿è‡ªåŠ¨é€‚åº”å®½åº¦

## ç›¸å…³æ–‡ä»¶

- `src/gui/app.rs` - GUI ä¸»é€»è¾‘
  - `render_config_panel()` - é…ç½®é¢æ¿æ¸²æŸ“
  - Mod åˆ—è¡¨æ¸²æŸ“é€»è¾‘

## æœªæ¥æ”¹è¿›

1. **é…ç½®é¢æ¿é«˜åº¦**
   - å½“å‰å›ºå®š max_height = 200px
   - å¯ä»¥æ”¹ä¸ºè‡ªé€‚åº”çª—å£é«˜åº¦

2. **é…ç½®åˆ†ç»„**
   - æ”¯æŒå°†é…ç½®é¡¹åˆ†ç»„æ˜¾ç¤º
   - å¯æŠ˜å çš„é…ç½®ç»„

3. **é…ç½®æœç´¢**
   - åœ¨é…ç½®é¡¹è¾ƒå¤šæ—¶æä¾›æœç´¢åŠŸèƒ½
   - é«˜äº®åŒ¹é…é¡¹

## ç¼–è¯‘æµ‹è¯•

```bash
cargo build --bin infinite-gui
# âœ… ç¼–è¯‘æˆåŠŸ

cargo run --bin infinite-gui
# âœ… è¿è¡Œæ­£å¸¸
```

## æ€»ç»“

è¿™æ¬¡æ”¹è¿›è®© GUI æ›´åŠ æ™ºèƒ½å’Œç¾è§‚:
- âœ… è‡ªåŠ¨éšè—ä¸éœ€è¦çš„æŒ‰é’®
- âœ… å……åˆ†åˆ©ç”¨çª—å£ç©ºé—´
- âœ… æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ
